---
title: 'swap, zram, zswap, random linux stuffs'
thumbnail: https://raw.githubusercontent.com/audacioustux/paste/master/Screenshot_20200204_013440.png
date: 2019-12-30 10:29:56
comments: true
categories:
- linux
tags:
- zswap
- zram
- config
- tools
- tips
---

#### **context**: `Linux Bangladesh` facebook group

---

1. #### **swap, swapfile, zswap, zram**
‡¶∞‚Äç‡ßç‡¶Ø‡¶æ‡¶Æ ‡¶Ø‡¶§‡¶á ‡¶π‡ßã‡¶ï, almost-always-add-swap-space - https://haydenjames.io/linux-performance-almost-always-add-swap-space/

##### **‡¶ï‡¶ø‡¶®‡ßç‡¶§‡ßÅ ‡¶ï‡¶§ GB?**
* hibernate (suspend on disk) ‡¶´‡¶ø‡¶ö‡¶æ‡¶∞ ‡¶ö‡¶æ‡¶á‡¶≤‡ßá ‡¶∞‚Äç‡ßç‡¶Ø‡¶æ‡¶Æ‡ßá‡¶∞ ‡¶∏‡¶æ‡¶á‡¶ú + ‡ßß ‡¶ú‡¶ø‡¶¨‡¶ø
* ‡¶Ø‡¶¶‡¶ø ‡¶π‡¶æ‡¶á‡¶¨‡¶æ‡¶∞‡¶®‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ö‡¶ø‡¶®‡ßç‡¶§‡¶æ ‡¶≠‡¶æ‡¶¨‡¶®‡¶æ ‡¶®‡¶æ ‡¶•‡¶æ‡¶ï‡ßá:
    - hdd ‡¶π‡¶á‡¶≤‡ßá: ‡¶¶‡¶∞‡¶ï‡¶æ‡¶∞ ‡¶®‡¶æ‡¶á (‡¶™‡¶∞‡ßá ‡¶ï‡¶æ‡¶π‡¶ø‡¶®‡ßÄ ‡¶ñ‡ßÅ‡¶≤‡ßá ‡¶¨‡¶≤‡¶§‡ßá‡¶õ‡¶ø)
    - ssd ‡¶π‡¶á‡¶≤‡ßá: 1 GB

##### **‡¶ï‡ßç‡¶Ø‡¶æ‡¶Æ‡¶®‡ßá ‡¶¨‡¶æ‡¶®‡¶æ‡¶¨‡ßã?**
```
$ sudo su
$ dd if=/dev/zero of=/swapfile1 bs=1G count=<swap_size>
$ chown root:root /swapfile1; chmod 0600 /swapfile1
$ mkswap /swapfile1; swapon /swapfile1
$ echo "/swapfile1 none swap sw 0 0" >> /etc/fstab
```
explanation: 1) switch to root user, 2) ‡¶π‡¶ø‡¶â‡¶ú ‡¶è‡¶ï‡¶ñ‡¶æ‡¶® ‡¶´‡¶æ‡¶á‡¶≤, ‡¶Ø‡¶æ‡¶§‡ßá ‡¶ï‡ßã‡¶®‡ßã ‡¶π‡ßã‡¶≤ ‡¶®‡¶æ‡¶á -_- replace `<swap_size>` with ‡¶Ø‡¶§ ‡¶ú‡¶ø‡¶¨‡¶ø ‡¶∏‡ßã‡ßü‡¶æ‡¶™ ‡¶ö‡¶æ‡¶® (ex: 1,2,3...) 3) set permission for the file 4) file ‡¶ü‡¶æ‡¶ï‡ßá ‡¶∏‡ßã‡ßü‡¶æ‡¶™ ‡¶π‡¶ø‡¶∏‡¶æ‡¶¨‡ßá ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶â‡¶™‡¶Ø‡ßã‡¶ó‡ßÄ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø‡ßá 5) swapfile ‡¶ü‡¶æ ‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡¶∏‡ßç‡¶ü‡¶æ‡¶∞‡ßç‡¶ü‡¶æ‡¶™‡ßá ‡¶Ö‡¶ü‡ßã‡¶Æ‡ßç‡¶Ø‡¶æ‡¶ü‡¶ø‡¶ï‡¶æ‡¶≤‡¶ø ‡¶∏‡ßã‡ßü‡¶æ‡¶™ ‡¶π‡¶ø‡¶∏‡¶æ‡¶¨‡ßá ‡¶Æ‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø‡ßá...

##### zswap, zram ‡¶ï‡¶ø‡¶§‡¶æ?
‡¶∏‡ßã‡ßü‡¶æ‡¶™ ‡¶Ü‡¶∏‡¶≤‡ßá ‡¶ï‡¶ø ‡¶π‡ßü? 

    "memory pages which are hardly ever used" 

‡¶§‡ßã ‡¶∏‡ßá‡¶á ‡¶Æ‡ßá‡¶Æ‡ßã‡¶∞‡¶ø swapfile ‡¶è ‡¶®‡¶æ ‡¶∞‡ßá‡¶ñ‡ßá ‡¶Æ‡ßá‡¶Æ‡ßã‡¶∞‡ßÄ‡¶§‡ßá‡¶á ‡¶ï‡¶Æ‡ßç‡¶™‡ßç‡¶∞‡ßá‡¶∏ ‡¶ï‡¶á‡¶∞‡¶æ ‡¶∞‡¶æ‡¶ñ‡¶≤‡ßá‡¶á ‡¶§‡ßã ‡¶π‡ßü ü§î ‡¶∏‡ßÅ‡¶¨‡¶ø‡¶ß‡¶æ? hdd/ssd ‡¶∞‚Äç‡ßç‡¶Ø‡¶æ‡¶Æ‡ßá‡¶∞ ‡¶•‡ßá‡¶ï‡ßá ‡¶Ö‡¶®‡ßá‡¶ï‡¶ü‡¶æ ‡¶∏‡ßç‡¶≤‡ßã‡•§ ‡¶π‡¶æ‡¶∞‡ßç‡¶°‡¶≤‡¶ø ‡¶è‡¶≠‡¶æ‡¶∞ ‡¶á‡¶â‡¶ú‡ßç‡¶° ‡¶Æ‡¶æ‡¶®‡ßá‡¶§‡ßã ‡¶è‡¶á ‡¶®‡¶æ ‡¶Ø‡ßá ‡¶ï‡¶ñ‡¶®‡ßã‡¶á ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶π‡¶¨‡ßá‡¶®‡¶æ? ‡¶Ü‡¶∞ ‡¶Ø‡¶¶‡¶ø ‡¶∞‚Äç‡ßç‡¶Ø‡¶æ‡¶Æ ‡¶Ö‡¶®‡ßá‡¶ï‡¶ü‡¶æ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶π‡ßü‡ßá ‡¶Ø‡¶æ‡ßü, ‡¶§‡¶ñ‡¶® ‡¶Ø‡¶æ‡¶∏‡ßç‡¶ü ‡¶ï‡¶ø‡¶õ‡ßÅ‡¶ü‡¶æ ‡¶ï‡¶Æ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶π‡¶á‡¶§‡ßá‡¶õ‡ßá ‡¶è‡¶Æ‡¶® ‡¶Æ‡ßá‡¶Æ‡ßã‡¶∞‡ßÄ‡¶ì ‡¶∏‡ßã‡ßü‡¶æ‡¶™ ‡¶π‡ßü‡ßá ‡¶Ø‡¶æ‡¶á‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá‡•§ ‡¶ï‡¶Æ‡ßç‡¶™‡ßç‡¶∞‡ßá‡¶∏ ‡¶ï‡¶∞‡ßá ‡¶∞‚Äç‡ßç‡¶Ø‡¶æ‡¶Æ‡ßá‡¶á ‡¶∞‡ßá‡¶ñ‡ßá ‡¶¶‡¶ø‡¶≤‡ßá ram ‡¶è‡¶∞ ‡¶è‡¶ï‡¶ü‡¶æ ‡¶Ö‡¶Ç‡¶∂ ‡¶∏‡ßã‡ßü‡¶æ‡¶™ ‡¶∏‡ßç‡¶ü‡ßã‡¶∞‡ßá‡¶ú‡ßá‡¶∞ ‡¶Æ‡¶§ ‡¶ï‡¶æ‡¶ú ‡¶ï‡¶∞‡¶§‡ßá‡¶õ‡ßá üòå zswap, zram ‡¶è‡¶∞ ‡¶ï‡¶æ‡¶π‡¶ø‡¶®‡ßÄ ‡¶á‡¶π‡¶æ‡¶á :) 
zswap ‡¶ï‡¶Æ‡ßç‡¶™‡ßç‡¶∞‡ßá‡¶∏ ‡¶ï‡¶∞‡ßá ‡¶Æ‡ßá‡¶Æ‡ßã‡¶∞‡¶ø‡¶§‡ßá‡¶á ‡¶∞‡¶æ‡¶ñ‡¶§‡ßá‡¶õ‡ßá, ‡¶ï‡¶ø‡¶®‡ßç‡¶§‡ßÅ ‡¶Ø‡¶ñ‡¶® ‡¶Æ‡ßá‡¶Æ‡ßã‡¶∞‡¶ø‡¶ì ‡¶´‡ßÅ‡¶≤ ‡¶π‡ßü‡ßá ‡¶Ø‡¶æ‡¶ì‡ßü‡¶æ ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡¶¨‡ßá, ‡¶Æ‡ßá‡¶Æ‡ßã‡¶∞‡¶ø‡¶§‡ßá ‡¶ï‡¶Æ‡ßç‡¶™‡ßç‡¶∞‡ßá‡¶∏ ‡¶π‡¶ì‡ßü‡¶æ ‡¶°‡¶æ‡¶ü‡¶æ ‡¶Ü‡¶∏‡¶≤ ‡¶∏‡ßã‡ßü‡¶æ‡¶™ ‡¶∏‡ßç‡¶ü‡ßã‡¶∞‡ßá‡¶ú‡ßá ‡¶Æ‡ßÅ‡¶≠ ‡¶ï‡¶∞‡¶æ ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡¶¨‡ßá... 
zram ‡¶è‡¶∞ ‡¶ï‡ßç‡¶∑‡ßá‡¶§‡ßç‡¶∞‡ßá ‡¶Æ‡ßÅ‡¶≠‡ßá‡¶∞ ‡¶ï‡ßã‡¶®‡ßã ‡¶ï‡¶æ‡¶π‡¶ø‡¶®‡ßÄ ‡¶®‡¶æ‡¶á :) ‡¶¨‡¶æ‡¶ï‡¶ø‡¶∏‡¶¨ zswap ‡¶è‡¶∞ ‡¶Æ‡¶§‡¶á‡•§ ‡¶§‡ßã zram ‡¶è‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá swapfile/partition ‡¶∞‡ßá‡¶ñ‡ßá ‡¶≤‡¶æ‡¶≠ ‡¶®‡¶æ‡¶á‡•§

##### **‡¶§‡ßã ‡¶ï‡¶ñ‡¶® ‡¶ï‡ßã‡¶®‡¶ü‡¶æ? zram or zwap?**
hdd ‡¶π‡¶á‡¶≤‡ßá ‡¶Ø‡¶æ‡¶∏‡ßç‡¶ü zram. ssd ‡¶π‡¶á‡¶≤‡ßá zswap üëå
‡¶è‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø‡ßá‡¶á ‡¶è‡¶ï‡ßá‡¶¨‡¶æ‡¶∞‡ßá ‡¶™‡ßç‡¶∞‡¶•‡¶Æ‡ßá ‡¶¨‡¶≤‡¶õ‡¶ø‡¶≤‡¶æ‡¶Æ hdd ‡¶§‡ßá swap ‡¶è‡¶∞ ‡¶¶‡¶∞‡¶ï‡¶æ‡¶∞ ‡¶®‡¶æ‡¶á‡•§

##### **‡¶ï‡¶ø‡¶®‡ßç‡¶§‡ßÅ ‡¶ï‡ßç‡¶Ø‡¶æ‡¶Æ‡¶®‡ßá?**
‡¶è‡¶ï‡ßá‡¶ï ‡¶°‡¶ø‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡ßã‡¶§‡ßá ‡¶è‡¶ï‡ßá‡¶ï‡¶≠‡¶æ‡¶¨‡ßá zram, zwap enable ‡¶ï‡¶∞‡ßá‡•§ manjaro, pop_os ‡¶è‡¶á ‡¶¶‡ßÅ‡¶á‡¶ü‡¶æ‡¶∞ ‡¶ü‡¶æ ‡¶ï‡¶Æ‡ßá‡¶®‡ßç‡¶ü‡ßá ‡¶¶‡¶ø‡¶§‡ßá‡¶õ‡¶ø

2. #### **personal preference:**
**distro**: manjaro kde
**package manager**: snap -> flatpak -> pacman -> yay
**terminal emulator**: ‡¶Ö‡¶®‡ßá‡¶ï ‡¶Ö‡¶®‡ßá‡¶ï ‡¶ò‡ßÅ‡¶∞‡¶æ‡¶ò‡ßÅ‡¶∞‡¶ø‡¶∞ ‡¶™‡¶∞ kitty ( https://github.com/kovidgoyal/kitty ) ‡¶§‡ßá ‡¶∂‡¶æ‡¶®‡ßç‡¶§‡¶ø ‡¶™‡¶æ‡¶á‡¶≤‡¶æ‡¶Æ.
**config**: https://gist.github.com/audacioustux/4967b2c6d25a004c394455a95f676508 (follow the README file)
**shell**: zsh with starship config: ^
**terminal** editor: emacs with spacemacs
**config**: https://gist.github.com/audacioustux/1d4aea266047e3efec5f4796441ae1af

3. #### **tools:**
**ripgrep (like grep)**: https://github.com/BurntSushi/ripgrep
**bat (like cat)**: https://github.com/sharkdp/bat
**fkill**: https://github.com/sindresorhus/fkill-cli
**fd (like find)**: https://github.com/sharkdp/fd
**ag(like ack)**: https://github.com/ggreer/the_silver_searcher